<h2 mat-dialog-title>Register Family</h2>
<div mat-dialog-content>
  <form class="add-persons-form" [formGroup]="myForm">
    <div class="shelter-selection-wrapper">
      <mat-form-field>
        <mat-label>Select Shelter*</mat-label>
        <mat-select formControlName="shelter">
          <mat-option *ngFor="let shelter of data.availableShelters" [value]="shelter.id">
            {{ shelter.name }} - {{ shelter.remainingNumberOfPlaces}}/{{shelter.numberOfPlaces}} available
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <ng-container formArrayName="persons">
      <ng-container *ngFor="let personForm of persons.controls; let i = index">
        <mat-card class="example-card">
          <mat-card-header>
            <mat-card-title>Person {{ i + 1 }}</mat-card-title>
            <button mat-button color="primary" (click)="deletePerson(i)">
                <mat-icon>person_remove</mat-icon>
                Remove person
            </button>
            <mat-icon class="delete-btn" (click)="deletePerson(i)"></mat-icon>
          </mat-card-header>
          <mat-card-content>
            <div class="lesson-form-row" [formGroup]="personForm">
              <mat-form-field>
                <input matInput formControlName="name" placeholder="Name*" />
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  formControlName="surname"
                  placeholder="Surname*"
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  matInput
                  formControlName="age"
                  placeholder="Age*"
                  type="number"
                  min="0"
                />
              </mat-form-field>
              <div>
                <label id="example-radio-group-label">Gender*</label>
                <mat-radio-group
                  formControlName="gender"
                  aria-label="Gender"
                  color="primary"
                >
                  <mat-radio-button value="male">Male</mat-radio-button>
                  <mat-radio-button value="female">Female</mat-radio-button>
                  <mat-radio-button value="other">Other</mat-radio-button>
                </mat-radio-group>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </ng-container>
    </ng-container>

    <button mat-button color="primary" (click)="addPerson()">
        <mat-icon class="add-course-btn">person_add</mat-icon>
        Add new person
    </button>
  </form>
</div>
<div mat-dialog-actions>
  <button mat-dialog-close mat-stroked-button color="primary">Cancel</button>
  <button
    mat-dialog-close
    mat-raised-button
    color="primary"
    (click)="registerFamily()"
  >
    Save
  </button>
</div>
